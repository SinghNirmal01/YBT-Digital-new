<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment Page</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    body {
      background: linear-gradient(0deg, #f0fdf4, #f0fdf4),
        repeating-linear-gradient(45deg,
          #34d399 0,
          #34d399 1px,
          transparent 1px,
          transparent 20px);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }

    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .loader {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-top: 4px solid #34d399;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    #copyBtn {
      box-shadow: -4px -4px 2px #0f766e inset;
    }

    #copyBtn:active {
      box-shadow: 4px 4px 2px #0f766e inset;
    }
    #iconLoader{
      animation: spin 2s ease-out infinite;
    }
  </style>
</head>

<body class="bg-teal-100 min-h-screen flex items-center justify-center">

  <div class="bg-white shadow-lg rounded-lg p-8 w-full max-w-md">
    <h1 class="text-3xl font-bold text-center text-teal-700 mb-6">Payment</h1>

    <div class="flex justify-center mb-6">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiNl7G8sv3FkolTRgwg9txbIE1FnFuK26Hs4M4ZlRdl1phdkE1DBrwR1_fO-odQQO7cWJ9gdiWLbvNLphhTNcZbMjVahOQ7oURvjZdHG1MOKBvDKDj-TChxNBK2dPTF_zd58Zjx8x_ko9UL9qa_zB3NhorJpggQN7Kf0RYgPlfMHqvB7lm8F2slkZK0kCet/s535/qr.jpg" alt="QR Code" class="w-40 h-40">
    </div>

    <div class="flex items-center justify-center mb-4">
      <span class="font-bold text-teal-700 text-lg">brajendrayoubtech062@fam</span>
      <div class="flex flex-col justify-center items-center text-center">
        <button id="copyBtn" onclick="copyUPI()" class="w-10 h-10 ml-2 bg-teal-600  text-white p-2 rounded-full transition">
          <i id="copy" class="fa-regular fa-copy"></i>
          <i id="check" class="hidden fa-solid fa-check"></i>
        </button>
        <span id="toolTip" class="text-[0.7em] text-emerald-500 hidden ">copied</span>
      </div>
    </div>

    <div class="flex justify-center gap-4 mb-8">
      <svg class="w-10 h-10" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
        <circle cx="-25.926" cy="41.954" r="29.873" fill="#5f259f" transform="rotate(-76.714 -48.435 5.641) scale(8.56802)" />
        <path d="M372.164 189.203c0-10.008-8.576-18.593-18.584-18.593h-34.323l-78.638-90.084c-7.154-8.577-18.592-11.439-30.03-8.577l-27.17 8.577c-4.292 1.43-5.723 7.154-2.862 10.007l85.8 81.508H136.236c-4.293 0-7.154 2.861-7.154 7.154v14.292c0 10.016 8.585 18.592 18.592 18.592h20.015v68.639c0 51.476 27.17 81.499 72.931 81.499 14.292 0 25.739-1.431 40.03-7.146v45.753c0 12.87 10.016 22.886 22.885 22.886h20.015c4.293 0 8.577-4.293 8.577-8.586V210.648h32.893c4.292 0 7.145-2.861 7.145-7.145v-14.3zM280.65 312.17c-8.576 4.292-20.015 5.723-28.591 5.723-22.886 0-34.324-11.438-34.324-37.176v-68.639h62.915v100.092z" fill="#fff" fill-rule="nonzero" />
      </svg>


      <?xml version="1.0" encoding="utf-8"?><svg class="w-10 h-10" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 38.52" style="enable-background:new 0 0 122.88 38.52" xml:space="preserve">
        <style type="text/css">
          <![CDATA[
          .st0 {
            fill: #20336B;
          }

          .st1 {
            fill: #00BAF2;
          }
          ]]>
        </style>
        <g>
          <path class="st1" d="M122.47,11.36c-1.12-3.19-4.16-5.48-7.72-5.48h-0.08c-2.32,0-4.41,0.97-5.9,2.52 c-1.49-1.55-3.58-2.52-5.9-2.52h-0.07c-2.04,0-3.91,0.75-5.34,1.98V7.24c-0.05-0.63-0.56-1.12-1.2-1.12h-5.48 c-0.67,0-1.21,0.54-1.21,1.21v29.74c0,0.67,0.54,1.21,1.21,1.21h5.48c0.61,0,1.12-0.46,1.19-1.04l0-21.35c0-0.08,0-0.14,0.01-0.21 c0.09-0.95,0.79-1.74,1.89-1.83h1.01c0.46,0.04,0.85,0.2,1.15,0.45c0.48,0.38,0.74,0.96,0.74,1.6l0.02,21.24 c0,0.67,0.54,1.22,1.21,1.22h5.48c0.65,0,1.17-0.51,1.2-1.15l0-21.33c0-0.7,0.32-1.34,0.89-1.71c0.28-0.18,0.62-0.3,1.01-0.34h1.01 c1.19,0.1,1.9,1,1.9,2.05l0.02,21.22c0,0.67,0.54,1.21,1.21,1.21h5.48c0.64,0,1.17-0.5,1.21-1.13V13.91 C122.86,12.6,122.69,11.99,122.47,11.36L122.47,11.36z M85.39,6.2h-3.13V1.12c0-0.01,0-0.01,0-0.02C82.26,0.5,81.77,0,81.15,0 c-0.07,0-0.14,0.01-0.21,0.02c-3.47,0.95-2.78,5.76-9.12,6.17h-0.61c-0.09,0-0.18,0.01-0.27,0.03h-0.01l0.01,0 C70.41,6.35,70,6.83,70,7.41v5.48c0,0.67,0.54,1.21,1.21,1.21h3.3l-0.01,23.22c0,0.66,0.54,1.2,1.2,1.2h5.42 c0.66,0,1.2-0.54,1.2-1.2l0-23.22h3.07c0.66,0,1.21-0.55,1.21-1.21V7.41C86.6,6.74,86.06,6.2,85.39,6.2L85.39,6.2z" />
          <path class="st0" d="M65.69,6.2h-5.48C59.55,6.2,59,6.74,59,7.41v11.33c-0.01,0.7-0.58,1.26-1.28,1.26h-2.29 c-0.71,0-1.29-0.57-1.29-1.28L54.12,7.41c0-0.67-0.54-1.21-1.21-1.21h-5.48c-0.67,0-1.21,0.54-1.21,1.21v12.41 c0,4.71,3.36,8.08,8.08,8.08c0,0,3.54,0,3.65,0.02c0.64,0.07,1.13,0.61,1.13,1.27c0,0.65-0.48,1.19-1.12,1.27 c-0.03,0-0.06,0.01-0.09,0.02l-8.01,0.03c-0.67,0-1.21,0.54-1.21,1.21v5.47c0,0.67,0.54,1.21,1.21,1.21h8.95 c4.72,0,8.08-3.36,8.08-8.07V7.41C66.9,6.74,66.36,6.2,65.69,6.2L65.69,6.2z M34.53,6.23h-7.6c-0.67,0-1.22,0.51-1.22,1.13v2.13 c0,0.01,0,0.03,0,0.04c0,0.02,0,0.03,0,0.05v2.92c0,0.66,0.58,1.21,1.29,1.21h7.24c0.57,0.09,1.02,0.51,1.09,1.16v0.71 c-0.06,0.62-0.51,1.07-1.06,1.12h-3.58c-4.77,0-8.16,3.17-8.16,7.61v6.37c0,4.42,2.92,7.56,7.65,7.56h9.93 c1.78,0,3.23-1.35,3.23-3.01V14.45C43.34,9.41,40.74,6.23,34.53,6.23L34.53,6.23z M35.4,29.09v0.86c0,0.07-0.01,0.14-0.02,0.2 c-0.01,0.06-0.03,0.12-0.05,0.18c-0.17,0.48-0.65,0.83-1.22,0.83h-2.28c-0.71,0-1.29-0.54-1.29-1.21v-1.03c0-0.01,0-0.03,0-0.04 l0-2.75v-0.86l0-0.01c0-0.66,0.58-1.2,1.29-1.2h2.28c0.71,0,1.29,0.54,1.29,1.21V29.09L35.4,29.09z M13.16,6.19H1.19 C0.53,6.19,0,6.73,0,7.38v5.37c0,0.01,0,0.02,0,0.03c0,0.03,0,0.05,0,0.07v24.29c0,0.66,0.49,1.2,1.11,1.21h5.58 c0.67,0,1.21-0.54,1.21-1.21l0.02-8.32h5.24c4.38,0,7.44-3.04,7.44-7.45v-7.72C20.6,9.25,17.54,6.19,13.16,6.19L13.16,6.19z M12.68,16.23v3.38c0,0.71-0.57,1.29-1.28,1.29l-3.47,0v-6.77h3.47c0.71,0,1.28,0.57,1.28,1.28V16.23L12.68,16.23z" />
        </g>
      </svg>


      <img class="w-10 h-10" src="https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/google-pay-icon.png" alt="gpay">

    </div>


    <div class="w-full p-1 bg-teal-400 rounded-xl text-center mb-8">
      <span>dont know how to buy</span>
      <a class="text-blue-700 font-bold" href="#tips">check it</a>
    </div>


    <form id="paymentForm" action="https://api.web3forms.com/submit" method="POST">
      <input type="hidden" name="access_key" value="51c3c44d-238f-4a71-b03d-34d5132de149">
      <div class="mb-4">
        <label for="name" class="block text-teal-700">Full Name</label>
        <input type="text" id="name" name="name" class="w-full p-2 border border-teal-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500" required>
      </div>

      <div class="mb-4">
        <label for="email" class="block text-teal-700">Email Address</label>
        <input type="email" id="email" name="email" class="w-full p-2 border border-teal-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500" required>
      </div>

      <div class="mb-6">
        <label for="social" class="block text-teal-700">Social Media ID (Instagram or Telegram)</label>
        <input type="text" id="social" name="social" class="w-full p-2 border border-teal-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500" required>
      </div>

      <div class="mb-6">
        <label for="coupon" class="block text-teal-700">coupon code</label>
        <div class="flex border border-teal-300 rounded hover:outline-none hover:ring-2 hover:ring-teal-500">
          <input type="text" id="coupon" name="coupon" class="w-full p-2 font-bold transition focus:outline-none ">
          <button type="button" id="checkcoupon" class="p-2 bg-blue-100 rounded-full w-10 h-10 flex justify-center items-center">
            <i id="iconCheck" class=" fa-solid fa-check "></i>
<i id="iconLoader" class="fa-solid fa-spinner hidden"></i>

          </button>
        </div>
        <div class="w-full bg-teal-200 p-2 my-4 rounded-2xl border-2 border-dashed border-teal-300 text-center hidden" id="discount">
          <div class="text-emerald-600">coupon applied</div>
          <span id="calculation">49â‚¹ - 30% =</span>
          <span id="finalPrice" class="text-[1.2em] text-green-700">35 â‚¹</span>
        </div>
      </div>
      <button id="submit" type="submit" class="w-full bg-teal-600 text-white p-3 rounded-full hover:bg-teal-700 disabled:bg-gray-500 transition flex items-center justify-center" >
        <span id="price" class="btn-text">Buy with 49â‚¹</span>
        <span class="loader hidden"></span>
      </button>
    </form>

    <section class="mt-6 text-gray-700" id="tips">
      <h2 class="text-lg font-semibold">How to Buy a Product?</h2>
      <ol class="list-decimal ml-4 space-y-2 mt-2">
        <li>Copy the given UPI and make payment through your payment app.</li>
        <li>After making the payment and filling the form, the link to your product will be sent to your email and social media ID provided within 5 to 10 minutes.</li>
        <li>If you need assistance, contact us through social media or by filling out the contact form on this website.</li>
      </ol>
    </section>
  </div>

  <div id="orderModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h2 class="text-2xl font-bold text-teal-700 mb-4">Order Placed!</h2>
      <p class="mb-6">Your order has been placed successfully ðŸŽ‰. You will receive the product details shortly in your email. Plz Wait 5-10 Min. And Need Any Help Contact Instagram: @You_B_Tech</p>
      <button onclick="closeModal()" class="bg-teal-600 hover:bg-teal-700 text-white p-3 rounded-full transition">Close</button>
    </div>
  </div>

  <script>
  
  let coupons , code , discount ;
  
  
  fetch('https://coupons-api.onrender.com/coupons')
  .then(response => response.json())
  .then(data =>{
    document.getElementById('iconLoader').style.display = 'none'
    
    coupons = data
     codes = coupons.map(coupon => coupon.code);
 discounts = coupons.map(coupon => coupon.discount);

console.log('Codes:', codes);       // Output: ['DISCOUNT10', 'FREESHIP']
console.log('Discounts:', discounts); // Output: ['10%', 'Free Shipping']

  })
  .catch(error => console.error('Error:', error));
  
  
  
    // Copy UPI function
    function copyUPI() {
      const upiText = "brajendrayoubtech062@fam";
      navigator.clipboard.writeText(upiText).then(() => {

        document.getElementById('toolTip').style.display = 'block'
        setTimeout(() => {
          document.getElementById('toolTip').style.display = 'none'
        }, 2000)
      });
    }


    document.getElementById('checkcoupon').addEventListener('click', (e) => {
      
      document.getElementById('iconCheck').style.diaplay = 'none'
      
  e.preventDefault();
  e.stopPropagation();

  


  let inputCoupon = document.getElementById('coupon').value;

  // Find the coupon from the array
  let coupon = coupons.find(c => c.code === inputCoupon);

  if (coupon) {
    // If coupon is valid
    document.getElementById('coupon').style.color = 'green';
    document.getElementById('checkcoupon').style.background = 'rgba(0,255,0,0.5)';
    document.getElementById('submit').disabled = false;
    document.getElementById('discount').style.display = 'block';

    // Apply the discount dynamically
    let basePrice = 49; // Original price
    let discountedPrice = basePrice * Number(coupon.discount)/100
    let finalPrice = Math.round(basePrice - discountedPrice)
    document.getElementById('price').innerHTML = `Buy With ${finalPrice}â‚¹`;
    console.log(finalPrice, discountedPrice)
    
    document.getElementById('calculation').innerHTML = `${basePrice} - ${discountedPrice} =`
    document.getElementById('finalPrice').innerHTML = finalPrice + 'â‚¹'

  } else if (inputCoupon === '') {
    // If no coupon entered, set default state
    document.getElementById('submit').disabled = false;
    document.getElementById('discount').style.display = 'none';
    document.getElementById('price').innerHTML = 'Buy With 49â‚¹';

  } else {
    // If coupon is invalid
    document.getElementById('coupon').style.color = 'red';
    document.getElementById('checkcoupon').style.background = 'rgba(255,0,0,0.5)';
    document.getElementById('submit').disabled = true;
    document.getElementById('discount').style.display = 'none';
    document.getElementById('price').innerHTML = 'Buy With 49â‚¹';
  }
});
    
    
    // Show Loader and Handle Form Submission
    const paymentForm = document.getElementById("paymentForm");
    const btnLoader = paymentForm.querySelector('.loader');
    const btnText = paymentForm.querySelector('.btn-text');

    paymentForm.addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent default form submission

      // Show the loader and disable the button
      btnLoader.classList.remove('hidden');
      btnText.textContent = "Processing...";
      paymentForm.querySelector('button').disabled = true; // Disable the button

      // Collect form data
      const formData = new FormData(paymentForm);

      fetch(paymentForm.action, {
          method: 'POST',
          body: formData,
        })
        .then(response => {
          if (response.ok) {
            console.log("Submission successful");
            showModal(); // Show modal on success
          } else {
            console.error("Response not OK");
            alert("There was a problem with your submission. Please try again.");
          }
        })
        .catch(error => {
          console.error("Error:", error);
          alert("There was an error. Please try again.");
        })
        .finally(() => {
          // Hide loader and reset button text
          btnLoader.classList.add('hidden');
          btnText.textContent = "Buy";
          paymentForm.querySelector('button').disabled = false; // Enable the button
        });
    });

    // Show Modal after successful order placement
    function showModal() {
      const modal = document.getElementById("orderModal");
      modal.classList.remove("hidden");
    }

    // Close Modal
    function closeModal() {
      const modal = document.getElementById("orderModal");
      modal.classList.add("hidden");
    }
    
    
   
    
  
    
  </script>
</body>

</html>